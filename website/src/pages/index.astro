---
import DemoUpload from '../components/DemoUpload';
import '../styles/global.css';
const BASE = 'https://pompelmi.github.io/pompelmi';
const TITLE = 'Pompelmi — File upload malware scanning for Node.js (Express, Koa, Next.js) + YARA';
const DESC =
  'Scan and block malicious file uploads in Node.js. Drop-in adapters for Express, Koa, and Next.js. ZIP deep-inspection, MIME & size policies, optional YARA rules.';
const OG_IMAGE = `${BASE}/og.png`; // 1200x630 image at website/public/og.png (keep under ~200 KB)
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{TITLE}</title>
    <meta name="description" content={DESC} />
    <link rel="canonical" href={BASE + '/'} />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="index,follow" />
    <meta name="keywords" content="Node.js, Express, Koa, Next.js, file upload, malware scanning, YARA, ZIP bomb, MIME type, security, middleware" />
    <meta name="author" content="Pompelmi" />
    <meta name="theme-color" content="#000000" />
    <link rel="alternate" hreflang="en" href={BASE + '/'} />
    <link rel="alternate" hreflang="x-default" href={BASE + '/'} />
    <meta property="og:site_name" content="Pompelmi" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Pompelmi — Node.js file upload malware scanning" />

    <!-- Open Graph / Twitter -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={BASE + '/'} />
    <meta property="og:title" content={TITLE} />
    <meta property="og:description" content={DESC} />
    <meta property="og:image" content={OG_IMAGE} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={TITLE} />
    <meta name="twitter:description" content={DESC} />
    <meta name="twitter:image" content={OG_IMAGE} />
    <link rel="icon" href="/pompelmi/favicon.svg" />

    <script defer data-domain="pompelmi.github.io" src="https://plausible.io/js/script.js"></script>

    <!-- Structured data: Organization + SoftwareApplication + FAQ -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@graph": [
          {
            "@type": "Organization",
            "name": "Pompelmi",
            "url": "https://github.com/pompelmi/pompelmi",
            "sameAs": [
              "https://github.com/pompelmi/pompelmi"
            ]
          },
          {
            "@type": "SoftwareSourceCode",
            "name": "Pompelmi",
            "description": "Scan and block malicious file uploads in Node.js. Drop-in adapters for Express, Koa, and Next.js. ZIP deep-inspection, MIME & size policies, optional YARA rules.",
            "programmingLanguage": ["TypeScript", "JavaScript"],
            "runtimePlatform": "Node.js",
            "codeRepository": "https://github.com/pompelmi/pompelmi",
            "license": "https://opensource.org/licenses/MIT",
            "keywords": [
              "node.js",
              "express",
              "koa",
              "next.js",
              "file upload",
              "malware scanning",
              "yara",
              "zip bomb",
              "mime type",
              "security",
              "middleware"
            ]
          },
          {
            "@type": "FAQPage",
            "mainEntity": [
              {
                "@type": "Question",
                "name": "Does Pompelmi support YARA rules?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Yes. You can plug in your own YARA rules for advanced detections alongside built-in policies."
                }
              },
              {
                "@type": "Question",
                "name": "Can it inspect ZIP archives and prevent ZIP bombs?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Yes. It enforces limits on entries, per-entry size, total uncompressed size, and nesting depth."
                }
              },
              {
                "@type": "Question",
                "name": "Which frameworks are supported?",
                "acceptedAnswer": {
                  "@type": "Answer",
                  "text": "Express and Koa middleware, a Next.js App Router handler, and more adapters planned."
                }
              }
            ]
          }
        ]
      }
    </script>
  </head>

  <body class="antialiased">
    <header class="mx-auto max-w-5xl px-4 py-10">
      <h1 class="text-4xl font-bold tracking-tight">Scan & block malicious file uploads in Node.js</h1>
      <p class="mt-3 text-gray-600 max-w-2xl">
        {DESC}
      </p>

      <div class="mt-5 flex flex-wrap items-center gap-3">
        <a
          href="https://github.com/pompelmi/pompelmi?utm_source=site&utm_medium=header_cta&utm_campaign=stars"
          class="inline-flex items-center rounded-md bg-black px-4 py-2 text-white text-sm font-medium"
          aria-label="Star Pompelmi on GitHub"
          rel="noopener noreferrer"
          target="_blank"
        >
          ⭐ Star on GitHub
        </a>
        <a
          href="/pompelmi/getting-started/"
          class="inline-flex items-center rounded-md bg-gray-100 px-4 py-2 text-sm font-medium"
        >
          Read the docs
        </a>
        <a
          href="/pompelmi/reference/ui-react/"
          class="inline-flex items-center rounded-md bg-gray-100 px-4 py-2 text-sm font-medium"
        >
          UI API
        </a>
      </div>
    </header>

    <main class="mx-auto max-w-5xl px-4 pb-16">
      <section class="border-t pt-8">
        <h2 class="text-2xl font-semibold">Live demo</h2>
        <p class="text-sm text-gray-600 mb-4">
          Clean JPG → <strong>CLEAN</strong>. EICAR → <strong>MALICIOUS</strong>.
        </p>
        <DemoUpload client:load />
      </section>

      <section class="mt-12 grid gap-6 md:grid-cols-3">
        <a href="/pompelmi/how-to/nextjs/" class="rounded-xl border p-4 hover:bg-gray-50">
          <h3 class="font-medium">Next.js</h3>
          <p class="text-sm text-gray-600">Add scanning to a Next app.</p>
        </a>
        <a href="/pompelmi/how-to/express/" class="rounded-xl border p-4 hover:bg-gray-50">
          <h3 class="font-medium">Express</h3>
          <p class="text-sm text-gray-600">Protect uploads in an API route.</p>
        </a>
        <a href="/pompelmi/reference/ui-react/" class="rounded-xl border p-4 hover:bg-gray-50">
          <h3 class="font-medium">@pompelmi/ui-react</h3>
          <p class="text-sm text-gray-600">Props, events, examples.</p>
        </a>
      </section>
      <section class="mt-12 border-t pt-8" aria-labelledby="faq-heading">
        <h2 id="faq-heading" class="text-2xl font-semibold">FAQ</h2>
        <div class="mt-4 space-y-4">
          <details>
            <summary class="font-medium">Does Pompelmi support YARA rules?</summary>
            <p class="text-sm text-gray-600 mt-2">Yes. You can plug in your own YARA rules for advanced detections alongside built-in policies.</p>
          </details>
          <details>
            <summary class="font-medium">Can it inspect ZIP archives and prevent ZIP bombs?</summary>
            <p class="text-sm text-gray-600 mt-2">Yes. It enforces limits on entries, per-entry size, total uncompressed size, and nesting depth.</p>
          </details>
          <details>
            <summary class="font-medium">Which frameworks are supported?</summary>
            <p class="text-sm text-gray-600 mt-2">Express and Koa middleware, a Next.js App Router handler, and more adapters planned.</p>
          </details>
        </div>
      </section>
    </main>
  </body>
</html>